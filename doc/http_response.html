<!doctype html>
<html>
<head>
    <title>http_response -- AgentK Documentation Generator</title>
    <link rel="stylesheet" href="doc.css"/>
</head>
<body class="frames">
<ul>
    <li><a href="channel.html" title="cross process message gathering and dispatching system">channel</a></li>
    <li><a href="child_process.html" title="Wrapper for child process">child_process</a></li>
    <li><a href="crypto.html">crypto</a></li>
    <li><a href="doc.html" title="AgentK documentation generator">doc</a></li>
    <li><a href="file.html">file</a></li>
    <li><a href="gbk.html">gbk</a></li>
    <li><a href="http.html">http</a></li>
    <li>http_response</li>
    <li><a href="legacy.html" title="Legacy support module">legacy</a></li>
    <li><a href="q_watcher.html" title="Qunar Watcher module">q_watcher</a></li>
    <li><a href="router.html">router</a></li>
    <li><a href="static_file.html" title="static file request handler">static_file</a></li>
    <li><a href="stream.html" title="utils for stream consumption">stream</a></li>
    <li><a href="test.html">test</a></li>
    <li><a href="view.html">view</a></li>
    <li><a href="zlib.html">zlib</a></li>
    
</ul>
<div class="content">
<h1>http_response</h1>

<p>Wrapper class for http response, and basic methods to construct a response.

 </p>



<div class="meta-description">
    <p> This module contains a class named <code>HttpResponse</code> representing a response to a http request.</p>
</div>






<ul>
    
    <li>variable <a href="#gzip_min_body_len">gzip_min_body_len</a>:<code>number</code></li>
    <li><a href="#HttpResponse">function HttpResponse() </a></li><li><a href="#handler">function handler(fun) </a></li><li><a href="#data">function data(buffer) </a></li><li><a href="#error">function error(code, reason) </a></li><li><a href="#json">function json(json) </a></li><li><a href="#stream">function stream(stream) </a></li><li><a href="#file">function file(file) </a></li><li><a href="#ok">function ok() </a></li><li><a href="#redirect">function redirect(url) </a></li>
    
</ul>

<dl id="definitions">

    <dt id="gzip_min_body_len">
        <div>gzip_min_body_len</div>
        <sub>variable</sub>
    </dt>
    <dd>
        <p class="proto">gzip_min_body_len:<code>number</code> = <code>1024</code>
    

        <p class="desc">
            <p> minimum body length to enable gzip. Responses that have payload less that that size will not be gzipped.</p>
        </p>

        
    </dd>

    <dt id="HttpResponse">
        <div>HttpResponse()</div>
        <sub>class</sub>
    </dt>
    <dd>
        <p class="proto">function HttpResponse() 

        <p class="desc">
            
        </p>

        

        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="handler">
        <div>handler()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function handler(fun) 

        <p class="desc">
            <p> create a HttpResponse that works with a handler</p>
        </p>

        

        
        <h4>Parameters</h4>
        <dl>
            
            <dt>fun <code>function</code></dt>
            
        </dl>
        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="data">
        <div>data()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function data(buffer) 

        <p class="desc">
            <p> create a HttpResponse that sends some data to the client</p>
        </p>

        

        
        <h4>Parameters</h4>
        <dl>
            
            <dt>buffer <code>string|<a href="https://nodejs.org/api/buffer.html#buffer_class_buffer">Buffer</a></code></dt>
            
        </dl>
        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="error">
        <div>error()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function error(code, reason) 

        <p class="desc">
            <p> create a HttpResponse that responds a error</p>
        </p>

        

        
        <h4>Parameters</h4>
        <dl>
            
            <dt>code <code>number</code></dt>
            
            <dd><p>The status code of the error response</p></dd>
            <dt>reason <code>Error|string</code></dt>
            
            <dd><p>The extra message as the response payload</p></dd>
        </dl>
        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="json">
        <div>json()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function json(json) 

        <p class="desc">
            <p> create a HttpResponse that responds a json, The following header will be set:</p>

<pre><code>Content-Type: application/json</code></pre>
        </p>

        

        
        <h4>Parameters</h4>
        <dl>
            
            <dt>json <code>*</code></dt>
            
            <dd><p>Data to be sent</p></dd>
        </dl>
        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="stream">
        <div>stream()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function stream(stream) 

        <p class="desc">
            <p> create a HttpResponse that responds a json, The following header will be set:</p>
        </p>

        

        
        <h4>Parameters</h4>
        <dl>
            
            <dt>json <code>*</code></dt>
            
            <dd><p>Data to be sent</p></dd>
        </dl>
        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="file">
        <div>file()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function file(file) 

        <p class="desc">
            <p> create a HttpResponse that responds a local file. The local file should be present and readable,
 otherwise empty response will be sent and no error is reported.</p>
        </p>

        

        
        <h4>Parameters</h4>
        <dl>
            
            <dt>file</dt>
            
            <dd><p>local file path</p></dd>
        </dl>
        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="ok">
        <div>ok()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function ok() 

        <p class="desc">
            <p> create a empty response with status code 200.</p>
        </p>

        

        
        
        <h4>Returns</h4>
        <p style="margin-left: 1em"><code><a href="#HttpResponse">HttpResponse</a></code></p>
        
    </dd>

    <dt id="redirect">
        <div>redirect()</div>
        <sub>method</sub>
    </dt>
    <dd>
        <p class="proto">function redirect(url) 

        <p class="desc">
            <p> create a redirect response</p>
        </p>

        

        
        <h4>Parameters</h4>
        <dl>
            
            <dt>url</dt>
            
            <dd><p>redirection url
 </p></dd>
        </dl>
        
        
    </dd>

</dl>

</div>
</body>
</html>